// Copyright (C) Gaijin Games KFT.  All rights reserved.
#pragma once

#include <oldEditor/de_cm.h>
#include "GPUGrassTypePID.h"
#include "GPUGrassDecalPID.h"

// commands
enum
{
  PROPBAR_EDITOR_WTYPE = 133,
  PROPBAR_WIDTH = 280,

  CM_SHOW_PANEL = CM_PLUGIN_BASE + 1,
  CM_TOGGLE_PROPERTIES_AND_OBJECT_PROPERTIES,
  CM_CREATE_HEIGHTMAP,
  CM_ERASE_HEIGHTMAP,
  CM_IMPORT_HEIGHTMAP,
  CM_REIMPORT,
  CM_EXPORT_HEIGHTMAP,
  CM_IMPORT_WATER_DET_HMAP,
  CM_IMPORT_WATER_MAIN_HMAP,
  CM_ERASE_WATER_HEIGHTMAPS,
  CM_EXPORT_COLORMAP,
  CM_REBUILD,
  CM_BUILD_COLORMAP,
  CM_BUILD_LIGHTMAP,
  CM_EXPORT_AS_COMPOSIT,
  CM_EXPORT_LAND_TO_GAME,
  CM_EXPORT_LOFT_MASKS,
  CM_RESCALE_HMAP,
  CM_REBUILD_RIVERS,
  CM_DECREASE_BRUSH_SIZE,
  CM_INCREASE_BRUSH_SIZE,

  CM_SHOW_LAND_OBJECTS,
  CM_HIDE_SPLINES,
  CM_SHOW_PHYSMAT,
  CM_SHOW_PHYSMAT_COLORS,
  CM_CREATE_HOLEBOX_MODE,
  CM_HILL_UP,
  CM_HILL_DOWN,
  CM_SMOOTH,
  CM_ALIGN,
  CM_SHADOWS,
  CM_SCRIPT,

  CM_CREATE_POLYGON,
  CM_CREATE_LT,
  CM_CREATE_SNOW_SOURCE,

  CM_SELECT_NONE,
  CM_SELECT_SPLINES,
  CM_SELECT_PT,
  CM_SELECT_ENT,
  CM_SELECT_SPL_ENT,
  CM_SELECT_LT,
  CM_SELECT_SNOW,
  CM_USE_PIXEL_PERFECT_SELECTION,
  CM_SELECT_ONLY_IF_ENTIRE_OBJECT_IN_RECT,

  CM_RESTORE_HM_BACKUP,
  CM_COMMIT_HM_CHANGES,

  CM_CREATE_SPLINE,
  CM_REFINE_SPLINE,
  CM_SPLINE_EXPORT_TO_DAG,
  CM_SPLINE_IMPORT_FROM_DAG,

  CM_CREATE_ENTITY,
  CM_ROTATION_NONE,
  CM_ROTATION_X = CM_ROTATION_NONE + 1,
  CM_ROTATION_Y = CM_ROTATION_NONE + 2,
  CM_ROTATION_Z = CM_ROTATION_NONE + 3,

  CM_SPLIT_SPLINE,
  CM_REVERSE_SPLINE,
  CM_CLOSE_SPLINE,
  CM_OPEN_SPLINE,
  CM_SPLIT_POLY,

  CM_EXPORT_LAYERS,
  CM_MANUAL_SPLINE_REGEN_MODE,
  CM_SPLINE_REGEN,
  CM_SPLINE_REGEN_CTRL,
  CM_SET_PT_VIS_DIST,

  CM_COLLAPSE_MODIFIERS,
  CM_UNIFY_OBJ_NAMES,
  CM_AUTO_ATACH,
  CM_REBUILD_SPLINES_BITMASK,
  CM_MAKE_BOTTOM_SPLINES,
  CM_MOVE_OBJECTS,
  CM_SPLIT_COMPOSIT,
  CM_INSTANTIATE_GENOBJ_INTO_ENTITIES,
  CM_MAKE_SPLINES_CROSSES,
  CM_HIDE_UNSELECTED_SPLINES,
  CM_UNHIDE_ALL_SPLINES,

  CM_MOVE_TO_LAYER,
  CM_MOVE_TO_LAYER_FIRST,
  CM_MOVE_TO_LAYER_LAST = CM_MOVE_TO_LAYER_FIRST + 100,
};


#define MAX_DETAIL_TEXTURES 100

#define MAX_UI_NAVMESHES 2

// Navmesh properties
enum
{
  NM_PARAM_GRP,
  NM_PARAM_EXP,
  NM_PARAM_KIND,
  NM_PARAM_AREATYPE,
  NM_PARAM_AREAS_INPUT_CONTAINER,
  NM_PARAM_AREATYPE_MAIN,
  NM_PARAM_AREATYPE_DET,
  NM_PARAM_AREATYPE_RECT,
  NM_PARAM_AREATYPE_POLY,
  NM_PARAM_AREATYPE_RECT0,
  NM_PARAM_AREATYPE_RECT1,
  NM_PARAM_AREAS_TREE,
  NM_PARAM_AREAS_CREATE,
  NM_PARAM_AREAS_DELETE,
  NM_PARAM_CELL_DXZ,
  NM_PARAM_CELL_DY,
  NM_PARAM_CELL_A_HT,
  NM_PARAM_CELL_A_RAD,
  NM_PARAM_CELL_A_SLOPE,
  NM_PARAM_CELL_A_CLIMB,
  NM_PARAM_CELL_EDGE_MAX_LEN,
  NM_PARAM_CELL_EDGE_MAX_ERR,
  NM_PARAM_CELL_REG_MIN_SZ,
  NM_PARAM_CELL_REG_MERGE_SZ,
  NM_PARAM_CELL_VERTS_PER_POLY,
  NM_PARAM_CELL_DET_SAMPLE,
  NM_PARAM_CELL_DET_MAX_ERR,
  NM_PARAM_WATER,
  NM_PARAM_WATER_LEV,
  NM_PARAM_DROP_RESULT_ON_COLLISION,
  NM_PARAM_DROP_RESULT_ON_COLLISION_TRACE_OFFSET,
  NM_PARAM_DROP_RESULT_ON_COLLISION_TRACE_LEN,
  NM_PARAM_TYPE,
  NM_PARAM_TILE_SZ,
  NM_PARAM_BUCKET_SZ,
  NM_PARAM_PREFAB_COLLISION,
  NM_PARAM_TRACE_STEP,
  NM_PARAM_CROSSING_WATER_DEPTH,

  NM_PARAM_JLK_AND_CVRS_GRP,
  NM_PARAM_JLK_CVRS_EXTRA_CELLS,
  NM_PARAM_EMRG_ENABLED,
  NM_PARAM_EMRG_WALK_PRECISION,
  NM_PARAM_EMRG_EXTRUDE_MISTAKE,
  NM_PARAM_EMRG_EXTRUDE_LIMIT,
  NM_PARAM_EMRG_SAFE_CUT_LIMIT,
  NM_PARAM_EMRG_UNSAFE_CUT_LIMIT,
  NM_PARAM_EMRG_UNSAFE_MAX_CUT_SPACE,
  NM_PARAM_JLK_ENABLED,
  NM_PARAM_JLK_TYPEGEN,
  NM_PARAM_JLK_JUMPOFF_MIN_HEIGHT,
  NM_PARAM_JLK_JUMPOFF_MAX_HEIGHT,
  NM_PARAM_JLK_JUMPOFF_MIN_XZ_LENGTH,
  NM_PARAM_JLK_EDGE_MAPPING_ANGLE,
  NM_PARAM_JLK_EDGE_MERGE_ANGLE,
  NM_PARAM_JLK_EDGE_MERGE_DIST,
  NM_PARAM_JLK_JUMP_OVER_HEIGHT,
  NM_PARAM_JLK_JUMP_LENGTH,
  NM_PARAM_JLK_AGENT_HEIGHT,
  NM_PARAM_JLK_AGENT_MIN_SPACE,
  NM_PARAM_JLK_MIN_WIDTH,
  NM_PARAM_JLK_DH_THRESHOLD,
  NM_PARAM_JLK_MAX_OBSTRUCTION_ANGLE,
  NM_PARAM_JLK_MERGE_ANGLE,
  NM_PARAM_JLK_MERGE_DIST,
  NM_PARAM_JLK_CPLX_THRESHOLD,
  NM_PARAM_JLK_CROSS_OBSTACLES_WITH_JUMPLINKS,
  NM_PARAM_JLK_GENERATE_CUSTOM_JUMPLINKS,
  NM_PARAM_CVRS_ENABLED,
  NM_PARAM_CVRS_TYPEGEN,
  NM_PARAM_CVRS_MAX_HEIGHT,
  NM_PARAM_CVRS_MIN_HEIGHT,
  NM_PARAM_CVRS_MIN_WIDTH,
  NM_PARAM_CVRS_MIN_DEPTH,
  NM_PARAM_CVRS_SHOOT_WINDOW_HEIGHT,
  NM_PARAM_CVRS_COLLISION_TARNSP_THRESHOLD,
  NM_PARAM_CVRS_MERGE_DIST,
  NM_PARAM_CVRS_DH_THRESHOLD,
  NM_PARAM_CVRS_SHOOT_DEPTH_CHECK,
  NM_PARAM_CVRS_SHOOT_HEIGHT,
  NM_PARAM_CVRS_OPENING_TRESHOLD,
  NM_PARAM_CVRS_BOX_OFFSET,
  NM_PARAM_CVRS_TEST_X,
  NM_PARAM_CVRS_TEST_Y,
  NM_PARAM_CVRS_TEST_Z,

  NM_PARAM_EXPORT_TYPE,
  NM_PARAM_EXPORT_TYPE_WATER,
  NM_PARAM_EXPORT_TYPE_SPLINES,
  NM_PARAM_EXPORT_TYPE_HEIGHT_FROM_ABOVE,
  NM_PARAM_EXPORT_TYPE_GEOMETRY,
  NM_PARAM_EXPORT_TYPE_WATER_AND_GEOMETRY,

  NM_PARAM_COMPRESS_RATIO,
  NM_PARAMS_COUNT
};


// Property Panel pids
enum
{
  PID_BRUSH_GRP = 1,
  PID_BRUSH_RADIUS,
  PID_BRUSH_OPACITY,
  PID_BRUSH_HARDNESS,
  PID_BRUSH_SPACING,
  PID_BRUSH_AUTOREPEAT,
  PID_BRUSH_LIMIT_VALUE,
  PID_BRUSH_LIMIT_USE,
  PID_BRUSH_KERNEL_SIZE,
  PID_BRUSH_SIGMA,
  PID_BRUSH_CONTINUOS,
  PID_BRUSH_TRAIL,
  PID_BRUSH_POWER,
  PID_BRUSH_MASK,
  PID_BRUSH_APPLY_ONCE,
  PID_BRUSH_AUTO_ANGLE,
  PID_BRUSH_ANGLE,
  PID_BRUSH_ALIGN_OFFSET,
  PID_BRUSH_ALIGN_SGEOMETRY,
  PID_BRUSH_ALIGN_TOP,
  PID_BRUSHES_PIDS,

  PID_HMAP_PARAMS_GRP,
  PID_GRID_CELL_SIZE,
  PID_HEIGHT_SCALE,
  PID_HEIGHT_OFFSET,
  PID_HEIGHTMAP_OFFSET,
  PID_HEIGHTMAP_AUTOCENTER,
  PID_HM_COLLISION_OFFSET,
  PID_HM_COLLISION_SIZE,
  PID_HM_COLLISION_SHOW,

  PID_GRID_H2_CELL_SIZE,
  PID_GRID_H2_BBOX_OFS,
  PID_GRID_H2_BBOX_SZ,
  PID_GRID_H2_APPLY,

  PID_HM_EXPORT_GRP,
  PID_HM_EXPORT_TYPE,
  PID_HM_LOFT_BELOW_ALL,

  PID_HM_SIZE_METERS,
  PID_HM_SIZE_PIXELS,

  PID_RENDERER_GRP,
  PID_RENDER_GRID_STEP,
  PID_RENDER_RADIUS_ELEMS,
  PID_RENDER_RING_ELEMS,
  PID_RENDER_NUM_LODS,
  PID_RENDER_MAX_DETAIL_LOD,
  PID_RENDER_DETAIL_TILE,
  PID_RENDER_CANYON_HOR_TILE,
  PID_RENDER_CANYON_VERT_TILE,
  PID_RENDER_ELEM_SIZE,
  PID_RENDER_RADIOGROUP_HM,
  PID_RENDER_INITIAL_HM,
  PID_RENDER_FINAL_HM,
  PID_RENDER_DEBUG_LINES,
  PID_RENDER_ALL_SPLINES_ALWAYS,
  PID_RENDER_SEL_SPLINES_ALWAYS,
  PID_RENDER_HM2_YBASE_FOR_LOD,
  PID_HM2_DISPLACEMENT_Q,

  PID_LIGHTING_GRP,
  PID_SUN_LIGHT_COLOR,
  PID_SKY_LIGHT_COLOR,
  PID_SUN_LIGHT_POWER,
  PID_SKY_LIGHT_POWER,
  PID_SPECULAR_COLOR,
  PID_SPECULAR_MUL,
  PID_SPECULAR_POWER,
  PID_SUN_DIRECTION,
  PID_SUN_AZIMUTH,
  PID_SUN_ZENITH,
  PID_GET_SUN_SETTINGS,
  PID_GET_SUN_SETTINGS_AUTOMAT,
  PID_GET_SUN_DIR_SETTINGS_AUTOMAT,
  PID_CALC_FAST_LIGHTING,
  PID_CALC_GOOD_LIGHTING,
  PID_SAVE_LIGHTING_PC,
  PID_SAVE_LIGHTING_X360,
  PID_SAVE_LIGHTING_PS3,
  PID_SAVE_LIGHTING_PS4,
  PID_SAVE_LIGHTING_iOS,
  PID_SAVE_LIGHTING_AND,
  PID_SAVE_LIGHTING_DDS,
  PID_SHADOW_GRP,
  PID_SHADOW_BIAS,
  PID_SHADOW_TRACE_DIST,
  PID_SHADOW_DENSITY,
  PID_SHADOW_CASTERS_GRP,
  PID_SHADOW_CASTER_FIRST,
  PID_SHADOW_CASTER_LAST = PID_SHADOW_CASTER_FIRST + 200,

  PID_BOX_SIZE_X,
  PID_BOX_SIZE_Y,
  PID_BOX_SIZE_Z,

  PID_LAND_TEXTURES_OPTIONS_GRP,

  PID_DETAIL_TEX_LIST_GRP,

  PID_DETAIL_TEX_0,
  PID_DETAIL_TEX_LAST = PID_DETAIL_TEX_0 + MAX_DETAIL_TEXTURES - 1,

  PID_DETAIL_NMAP_0,
  PID_DETAIL_NMAP_LAST = PID_DETAIL_NMAP_0 + MAX_DETAIL_TEXTURES - 1,

  PID_DETAIL_SIDE_TEX_0,
  PID_DETAIL_SIDE_TEX_LAST = PID_DETAIL_SIDE_TEX_0 + MAX_DETAIL_TEXTURES - 1,

  PID_DETAIL_SIDE_NMAP_0,
  PID_DETAIL_SIDE_NMAP_LAST = PID_DETAIL_SIDE_NMAP_0 + MAX_DETAIL_TEXTURES - 1,

  PID_DETAIL_TEX_TILE_0,
  PID_DETAIL_TEX_TILE_LAST = PID_DETAIL_TEX_TILE_0 + MAX_DETAIL_TEXTURES - 1,

  PID_DETAIL_TEX_OFFSET_0,
  PID_DETAIL_TEX_OFFSET_LAST = PID_DETAIL_TEX_OFFSET_0 + MAX_DETAIL_TEXTURES - 1,

  PID_SET_NUM_DETAIL_TEXS,
  PID_CANYON_ANGLE,
  PID_CANYON_FADE_ANGLE,

  PID_SCRIPT_PARAMS_GRP,
  PID_SCRIPT_FILE,
  PID_RESET_SCRIPT,
  PID_RELOAD_SCRIPT,
  PID_GENERATE_COLORMAP,
  PID_IMPORT_SCRIPT_IMAGE,
  PID_CREATE_MASK,
  PID_TILE_OFFSET_GRP,

  PID_SCRIPT_PARAM_START,
  PID_LAST_SCRIPT_PARAM = PID_SCRIPT_PARAM_START + 2048,

  PID_GRASS_LAYER_GRP,
  PID_GRASS_PARAM_START = PID_GRASS_LAYER_GRP + 128,
  PID_LAST_GRASS_PARAM = PID_GRASS_PARAM_START + 2048,
  PID_ENABLE_GRASS,
  PID_GRASS_LOADFROM_LEVELBLK,
  PID_GRASS_ADDLAYER,
  PID_GRASS_MASK_START,
  PID_GRASS_MASK_END = PID_GRASS_MASK_START + 10,
  PID_GRASS_DEFAULT_MIN_DENSITY,
  PID_GRASS_DEFAULT_MAX_DENSITY,
  PID_GRASS_MAX_RADIUS,
  PID_GRASS_TEX_SIZE,

  PID_GRASS_SOW_PER_LIN_FREQ,
  PID_GRASS_FADE_DELTA,
  PID_GRASS_LOD_FADE_DELTA,
  PID_GRASS_BLEND_TO_LAND_DELTA,

  PID_GRASS_NOISE_FIRST_RND,
  PID_GRASS_NOISE_FIRST_VAL_MUL,
  PID_GRASS_NOISE_FIRST_VAL_ADD,

  PID_GRASS_NOISE_SECOND_RND,
  PID_GRASS_NOISE_SECOND_VAL_MUL,
  PID_GRASS_NOISE_SECOND_VAL_ADD,

  PID_GRASS_DIRECT_WIND_MUL,
  PID_GRASS_NOISE_WIND_MUL,
  PID_GRASS_WIND_PER_LIN_FREQ,
  PID_GRASS_DIRECT_WIND_FREQ,
  PID_GRASS_DIRECT_WIND_MODULATION_FREQ,
  PID_GRASS_WIND_WAVE_LENGTH,
  PID_GRASS_WIND_TO_COLOR,
  PID_GRASS_HELICOPTER_HOR_MUL,
  PID_GRASS_HELICOPTER_VER_MUL,
  PID_GRASS_HELICOPTER_TO_DIRECT_WIND_MUL,
  PID_GRASS_HELICOPTER_FALLOFF,

  PID_SHOWMASK,
  PID_ADDLAYER,


  PID_HORIZONTAL_TEX_GRP,
  PID_HORIZONTAL_TEX_NAME,
  PID_HORIZONTAL_DET_TEX_NAME,
  PID_HORIZONTAL_TILE_SIZE_X,
  PID_HORIZONTAL_TILE_SIZE_Y,
  PID_HORIZONTAL_OFFSET_X,
  PID_HORIZONTAL_OFFSET_Y,
  PID_HORIZONTAL_DETAIL_TILE_SIZE_X,
  PID_HORIZONTAL_DETAIL_TILE_SIZE_Y,
  PID_USE_HORIZONTAL_TEX,

  PID_LAND_MODULATE_TEX_TEX_GRP,
  PID_LAND_MODULATE_TEX_NAME,
  PID_LAND_MODULATE_EDGE0_X,
  PID_LAND_MODULATE_EDGE1_X,
  PID_USE_LAND_MODULATE_TEX,

  PID_RENDIST_DETAIL2_COLOR_GRP,
  PID_USE_RENDIST_DETAIL2_COLOR,
  PID_RENDIST_DETAIL2_COLOR_FROM,
  PID_RENDIST_DETAIL2_COLOR_TO,

  PID_TILE_TEX_GRP,
  PID_TILE_SIZE_X,
  PID_TILE_SIZE_Y,
  PID_TILE_TEX,

  PID_VERT_TEX_GRP,
  PID_VERT_TEX_USE,
  PID_VERT_TEX_USE_HMAP,
  PID_VERT_TEX_NAME,
  PID_VERT_TEX_TILE_XZ,
  PID_VERT_TEX_TILE_Y,
  PID_VERT_TEX_ANG0,
  PID_VERT_TEX_ANG1,
  PID_VERT_TEX_HBLEND,
  PID_VERT_NM_TEX_NAME,
  PID_VERT_TEX_Y_OFS,
  PID_VERT_DET_TEX_NAME,
  PID_VERT_DET_TEX_TILE_XZ,
  PID_VERT_DET_TEX_TILE_Y,
  PID_VERT_DET_TEX_Y_OFS,

  PID_LIGHTING_SUBDIV,
  PID_LIGHTING_1,
  PID_LIGHTING_2,
  PID_LIGHTING_4,

  PID_LCMAP_SUBDIV,
  PID_LCMAP_1,
  PID_LCMAP_2,
  PID_LCMAP_4,

  PID_MESH_GRP,
  PID_MESH_PREVIEW,
  PID_MESH_PREVIEW_DISTANCE,
  PID_REBUILD_MESH,
  // PID_MESH_CELL_SIZE,
  PID_MESH_CELLS,
  PID_MESH_ERROR_THRESHOLD,
  PID_NUM_MESH_VERTICES,
  PID_LOD1_DENSITY,
  PID_IMPORTANCE_MASK_SCALE,
  PID_WATER_SURF,
  PID_WATER_SURF_LEV,
  PID_MIN_UNDERWATER_BOTOM_DEPTH,
  PID_WATER_SURF_REBUILD,
  PID_WATER_OCEAN,
  PID_WATER_OCEAN_EXPAND,
  PID_WATER_OCEAN_SL_TOL,
  PID_WATER_SET_MAT,
  PID_DEBUG_CELLS,
  PID_MONOLAND,
  PID_MONOLAND_COL,
  PID_GROUND_OBJECTS_COL,
  PID_HTLEVELS,
  PID_HTLEVELS_STEP,
  PID_HTLEVELS_OFS,
  PID_HTLEVELS_THICK,
  PID_HTLEVELS_DARK,

  PID_SNOW_GRP,
  PID_SNOW_PREVIEW,
  PID_SNOW_SPHERE_PREVIEW,
  PID_DYN_SNOW,
  PID_COPY_SNOW,
  PID_AMB_SNOW,

  PID_NAVMESH_COMMON_GRP,
  PID_NAVMESH_EXPORT_START,
  PID_NAVMESH_EXPORT_END = PID_NAVMESH_EXPORT_START + MAX_UI_NAVMESHES - 1,
  PID_NAVMESH_SHOWN_NAVMESH,
  PID_NAVMESH_EXP_SHOW,
  PID_NAVMESH_COVERS_SHOW,
  PID_NAVMESH_CONTOURS_SHOW,
  PID_NAVMESH_OBSTACLES_SHOW,
  PID_NAVMESH_DISABLE_ZTEST,
  PID_NAVMESH_BUILD,

  PID_NAVMESH_START,
  PID_NAVMESH_END = PID_NAVMESH_START + NM_PARAMS_COUNT * MAX_UI_NAVMESHES - 1,

  PID_GPU_GRASS_GROUP,
  PID_GPU_GRASS_ENABLE,
  PID_GPU_GRASS_LOADFROM_LEVELBLK,
  PID_GPU_GRASS_TYPES,
  PID_GPU_GRASS_MASKS,
  PID_GPU_GRASS_GRID_SIZE,
  PID_GPU_GRASS_DISTANCE,
  PID_GPU_GRASS_MASK_RESOLUTION,
  PID_GPU_GRASS_HOR_SIZE_MUL,
  PID_GPU_GRASS_ADD_TYPE,
  PID_GPU_GRASS_REMOVE_TYPE,
  PID_GPU_GRASS_RENAME_TYPE,
  PID_GPU_GRASS_TYPE_START,
  PID_GPU_GRASS_TYPE_END = PID_GPU_GRASS_TYPE_START + GRASS_MAX_TYPES * (int)GPUGrassTypePID::COUNT,
  PID_GPU_GRASS_ADD_DECAL,
  PID_GPU_GRASS_REMOVE_DECAL,
  PID_GPU_GRASS_RENAME_DECAL,
  PID_GPU_GRASS_DECAL_START,
  PID_GPU_GRASS_DECAL_END = PID_GPU_GRASS_DECAL_START + GRASS_MAX_CHANNELS * (int)GPUGrassDecalPID::COUNT
};
